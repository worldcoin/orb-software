<!DOCTYPE HTML>
<html lang="en" class="rust" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>First Time Setup - orb-software</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('rust')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="first-time-setup.html" class="active">First Time Setup</a></li><li class="chapter-item expanded "><a href="development.html">Developing Code</a></li><li class="chapter-item expanded "><a href="open-source.html">How we do Open Source</a></li><li class="chapter-item expanded "><a href="hil/index.html">Hardware In The Loop</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="hil/cli.html">Orb-HIL CLI</a></li><li class="chapter-item expanded "><a href="hil/nixos-setup.html">Setting Up NixOS</a></li><li class="chapter-item expanded "><a href="hil/hardware-setup.html">Hardware Setup</a></li></ol></li><li class="chapter-item expanded "><a href="components/index.html">Software Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="components/orb-core/index.html">Orb Core</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">orb-software</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="initial-repo-setup"><a class="header" href="#initial-repo-setup">Initial repo setup</a></h1>
<p>To be able to build the code, there is some first-time setup required.</p>
<h2 id="set-up-nix--direnv-the-developer-environment"><a class="header" href="#set-up-nix--direnv-the-developer-environment">Set up nix + direnv (the developer environment)</a></h2>
<p>We use <a href="https://zero-to-nix.com">nix</a> to manage all of the dependencies during development.
While most of the software can use convnetional rust tools like cargo, we do
have a few additional dependencies. Instead of apt-installing them, we use nix
as the package manager, and use <a href="https://direnv.net/">direnv</a> to handle automatically
activating a developer shell. The process to install and configure these two
tools is as follows:</p>
<ol>
<li><a href="https://zero-to-nix.com/start/install">Install nix</a>. This works for both mac and linux, if you are
using a windows machine, you must first set up <a href="https://learn.microsoft.com/en-us/windows/wsl/install">WSL2</a>.</li>
<li>Ensure that you have these lines in your <code>~/.config/nix/nix.conf</code> or
<code>/etc/nix/nix.conf</code>. This is done automatically by the above installer:
<pre><code>experimental-features = nix-command flakes
max-jobs = auto
</code></pre>
You can check that things work by running <code>nix run nixpkgs#hello</code></li>
<li>Install direnv: <code>nix profile install nixpkgs#direnv</code></li>
<li><a href="https://direnv.net/docs/hook.html">Hook direnv</a> into your shell.</li>
<li>Set up your personalized .envrc file by running <code>cp .envrc.example .envrc</code>.
You can customize this file if you wish. We recommend filling in your cachix
token if you have one. If prompted, dont run <code>direnv allow</code> yet, follow step
6 first. Otherwise you'll get a bunch of errors.</li>
<li>Follow the instructions on vendoring proprietary SDKs in the subsequent
section.</li>
<li>Run <code>direnv allow</code> in the repository's root directory. Direnv will then
automatically use the .envrc file you set up any time you <code>cd</code> into the
directory.</li>
<li>If you are on macos, run the following:
<pre><code class="language-bash">brew install dbus
brew services start dbus
</code></pre>
</li>
</ol>
<h2 id="vendoring-proprietary-sdks"><a class="header" href="#vendoring-proprietary-sdks">Vendoring proprietary SDKs</a></h2>
<p>Although all of Worldcoin's code in the orb-software repo is open source, some of the
sensors on the orb rely on proprietary SDKs provided by their hardware vendors.
Luckily, these are accessible without any cost, they are just annoying to get and
are not themselves open source.</p>
<p>To get started, you will need to download these SDKs. The process for this
depends on if you are officially affiliated with Worldcoin.</p>
<h3 id="if-you-have-access-to-worldcoin-private-repos"><a class="header" href="#if-you-have-access-to-worldcoin-private-repos">If you have access to Worldcoin private repos</a></h3>
<ol>
<li>Create a <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-fine-grained-personal-access-token">personal access token</a> from github to allow you to use
private git repos over HTTPS.</li>
<li>Append the following to your <code>~/.config/nix/nix.conf</code>:
<pre><code>access-tokens =
github.com=github_pat_YOUR_ACCESS_TOKEN_HERE
</code></pre>
</li>
<li>Test everything works so far by running <code>nix flake metadata github:worldcoin/priv-orb-core</code>. You should see a tree of info. If not, you
probably don't have your personal access token set up right - post in slack
for help.</li>
</ol>
<h3 id="if-you-dont-have-access-to-worldcoin-private-repos"><a class="header" href="#if-you-dont-have-access-to-worldcoin-private-repos">If you don't have access to Worldcoin private repos</a></h3>
<ol>
<li>Go to <a href="https://developer.thermal.com/">https://developer.thermal.com</a> and create a developer
account. Getting the SDK can take several days for Seek Thermal to approve
access. In the meantime, you can skip steps 2 and 3.</li>
<li>Download the 4.1.0.0 version of the SDK (its in the developer forums).</li>
<li>Extract its contents, and note down the dir that <em>contains</em> the
<code>Seek_Thermal_SDK_4.1.0.0</code> dir.</li>
<li>modify your <code>.envrc</code> like this: <code>use flake --override-input seekSdk "PATH_FROM_STEP_3"</code>. If you don't yet have access to the SDK, just provide
a path to an empty directory.</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="development.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="development.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="mermaid.min.js"></script>
        <script src="mermaid-init.js"></script>


    </div>
    </body>
</html>
