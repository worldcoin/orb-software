<!DOCTYPE HTML>
<html lang="en" class="rust" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hardware Setup - orb-software</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('rust')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="../first-time-setup.html">First Time Setup</a></li><li class="chapter-item expanded "><a href="../development.html">Developing Code</a></li><li class="chapter-item expanded "><a href="../open-source.html">How we do Open Source</a></li><li class="chapter-item expanded "><a href="../hil/index.html">Hardware In The Loop</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../hil/cli.html">Orb-HIL CLI</a></li><li class="chapter-item expanded "><a href="../hil/nixos-setup.html">Setting Up NixOS</a></li><li class="chapter-item expanded "><a href="../hil/hardware-setup.html" class="active">Hardware Setup</a></li></ol></li><li class="chapter-item expanded "><a href="../components/index.html">Software Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../components/orb-core/index.html">Orb Core</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">orb-software</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="hardware-setup"><a class="header" href="#hardware-setup">Hardware Setup</a></h1>
<p>The HIL leverages the use of several hardware peripherals to control the orb.
Most important is the serial adapter and the x86 linux machine. While any x86
linux machine will do, we recommend purchasing an ASUS/Intel NUC due to the
convenient form factor.</p>
<h2 id="required-parts"><a class="header" href="#required-parts">Required Parts</a></h2>
<p>We break down the parts into common/shared items, and items per-hil.</p>
<blockquote>
<p>Note: Not all of these parts are required. In the most minimal case, we
recommend at least getting some electrical tape, an x86 linux machine, the
Micro USB cable, and a serial adapter. This will cover 90% of the use cases.
Note also, no soldering is required!</p>
</blockquote>
<h3 id="shared"><a class="header" href="#shared">Shared</a></h3>
<ul>
<li>Electrical Tape
<ul>
<li>US Source: TODO</li>
<li><a href="https://www.amazon.de/-/en/dp/B00PYFI1UW">DE Source</a></li>
</ul>
</li>
<li>Some Male-Male Jumper Wires (but Male-Female or Female-Female as needed).
<ul>
<li>US Source: TODO</li>
<li><a href="https://www.amazon.de/-/en/dp/B0D2XVMTFX">DE Source</a></li>
</ul>
</li>
<li>Display for initial bringup
<ul>
<li>Any monitor + keyboard + mouse, or:</li>
<li><a href="https://www.amazon.com/dp/B07VNX4ZWY">US Source</a></li>
<li><a href="https://www.amazon.de/-/en/dp/B0B8S9DYQC">DE Source</a></li>
</ul>
</li>
<li>A flash-drive</li>
</ul>
<h3 id="per-hil-rig"><a class="header" href="#per-hil-rig">Per HIL Rig</a></h3>
<h4 id="the-essentials"><a class="header" href="#the-essentials">The Essentials</a></h4>
<ul>
<li>1x Intel NUC 13 Pro Mini PC Core i7-1360P 16GB RAM
<ul>
<li><a href="https://www.amazon.com/dp/B0CYBMSJ2K">US source</a></li>
<li><a href="https://www.amazon.de/-/en/dp/B0CB1DY5KJ">DE Source</a></li>
</ul>
</li>
<li>1x FT232(RL) Serial Adapter
<ul>
<li><a href="https://www.amazon.com/dp/B07BBPX8B8">US Source</a></li>
<li><a href="https://www.amazon.de/-/en/dp/B07TXVRQ7V">DE Source</a></li>
</ul>
</li>
<li>1x USB Power Blocker for Flashing Cable
<ul>
<li><a href="https://www.amazon.com/dp/B094G4P3P4">US Source</a></li>
<li><a href="https://www.amazon.de/-/en/dp/B094FYL9QT">DE Source</a></li>
</ul>
</li>
<li>USB A male to micro USB male cable
<ul>
<li>US Source: TODO</li>
<li><a href="https://www.amazon.de/-/en/dp/B08HSBZW75">DE Source</a></li>
</ul>
</li>
<li>USB Dock (at least three usb-A ports)</li>
</ul>
<h4 id="flashing-the-microcontrollers"><a class="header" href="#flashing-the-microcontrollers">Flashing the microcontrollers</a></h4>
<ul>
<li>2x st-link v3
<ul>
<li><a href="https://www.amazon.com/dp/B07ML6F12Y">US Source</a></li>
<li><a href="https://www.amazon.de/-/en/dp/B07M6YJ7X5">DE Source</a></li>
</ul>
</li>
<li>2x tag-connect jtag adapter
<ul>
<li><a href="https://www.tag-connect.com/product/tc2030-ctx-6-pin-cable-for-arm-cortex">US Source</a></li>
<li><a href="https://www.tag-connect.com/product/tc2030-ctx-6-pin-cable-for-arm-cortex">DE Source</a></li>
</ul>
</li>
</ul>
<h2 id="connecting-the-parts-to-the-orb"><a class="header" href="#connecting-the-parts-to-the-orb">Connecting the parts to the orb</a></h2>
<h3 id="flashing-support"><a class="header" href="#flashing-support">Flashing support</a></h3>
<ol>
<li>Connect the microusb cable to the microusb port of the orb.</li>
<li>Use the USB Power blocker to ensure that this cable is data-only. This will
ensure that the main mcu doesn't get power from the cable. This is an
optional but highly recommended step.</li>
<li>Connect the usb power blocker to the NUC directly. Do not use the usb dock.</li>
</ol>
<h3 id="serial-and-reboot-support"><a class="header" href="#serial-and-reboot-support">Serial and Reboot support</a></h3>
<ol>
<li>Ensure the serial adapter is configured for 3.3v. There is a jumper on the
serial adapter that controls this setting.</li>
<li>Add electrical tape behind the TX and RX pins, to prevent short circuiting
the pins against the chassy.</li>
<li>Connect the GND pin of the serial adapter to the GND pin on the orb (there
is one at the top).</li>
<li>Connect TX and RX pins to the orb. TX (blue) on bottom, RX (green) on top.
<img src="../serial-pins.png" alt="picture of serial pins" /></li>
<li>Connect CTS pin to the BTN pin. Its located below the top
GND pin. This allows controlling the power button of the orb.
<img src="../button-pin.png" alt="picture of CTS pin" /></li>
<li>Connect the RTS pin to the bottom of the two pins on the recovery mode
jumper on the right side of the orb. This allows controlling recovery mode
of the orb.
<img src="../recovery-pin.png" alt="picture of recovery" /></li>
<li>Double check that nothing is going to short circuit. It is ok for the GND
pin to touch the chassy, but it is NOT ok for any of the other pins to touch
anything else.</li>
<li>Plug the serial adapter into the USB dock and connect the dock to the NUC.</li>
</ol>
<h3 id="optional-recovery-from-a-bricked-microcontroller"><a class="header" href="#optional-recovery-from-a-bricked-microcontroller">(Optional) Recovery from a bricked microcontroller</a></h3>
<p>For each microcontroller that you want to be able to recover without, you
should attach the ST-Link. For setups where you don't want to physically have
to access the orb, we recommend keeping both ST-Links always attached to their
microcontrollers. You can do this by:</p>
<ol>
<li>Plug the tag-connect adapter into the port. There are two - one for the main
mcu on the front center of the orb, and one for the security mcu on the back
of the orb.</li>
<li>Connect the other end of the tag-connect to the ST-Link.</li>
<li>Plug the st-link into the NUC (via the dock or directly).</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../hil/nixos-setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../components/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../hil/nixos-setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../components/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>


    </div>
    </body>
</html>
